!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ApiWay=e()}}(function(){return function e(t,r,n){function u(a,i){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!i&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return u(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)u(n[a]);return u}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./User"),i=n(a),s=e("./Project"),c=n(s),l=e("./Instance"),f=n(l),p=e("./Schedule"),h=n(p),d=e("./Scheduler"),y=n(d),_=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://127.0.0.1:3000";u(this,e),this.__apiBase=r,this.__auth=t||{}}return o(e,[{key:"getUser",value:function(e){return new i.default(e,this.__auth,this.__apiBase)}},{key:"getProject",value:function(e){return new c.default(e,this.__auth,this.__apiBase)}},{key:"getInstance",value:function(e){return new f.default(e,this.__auth,this.__apiBase)}},{key:"getSchedule",value:function(e){return new h.default(e,this.__auth,this.__apiBase)}},{key:"getScheduler",value:function(e){return new y.default(e,this.__auth,this.__apiBase)}}]),e}();t.exports=_},{"./Instance":2,"./Project":3,"./Schedule":5,"./Scheduler":6,"./User":7}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./Requestable"),c=n(s),l=e("debug"),f=n(l),p=((0,f.default)("apiway:instance"),function(e){function t(e,r,n){u(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return a.instanceId=e,a}return a(t,e),i(t,[{key:"getInstance",value:function(e,t){return this._request("GET","/instances/"+e,null,t)}},{key:"getInstancesByUser",value:function(e,t,r){return this._request("GET","/instances/users/"+e,t,r)}},{key:"getInstancesByProject",value:function(e,t,r){return this._request("GET","/instances/projects/"+e,t,r)}},{key:"addInstance",value:function(e,t){return this._request("POST","/instances",e,t)}},{key:"updateInstance",value:function(e,t,r){return this._request("PUT","/instances/"+e,t,r)}}]),t}(c.default));t.exports=p},{"./Requestable":4,debug:void 0}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./Requestable"),c=n(s),l=e("debug"),f=n(l),p=((0,f.default)("apiway:project"),function(e){function t(e,r,n){u(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return a.fullName=e,a}return a(t,e),i(t,[{key:"getProject",value:function(e,t){return this._request("GET","/projects/"+e,null,t)}},{key:"getProjectsByUser",value:function(e,t){return this._request("GET","/projects/users/"+e,null,t)}},{key:"addProject",value:function(e,t){return this._request("POST","/projects",e,t)}},{key:"updateProject",value:function(e,t,r){return this._request("PUT","/projects/"+e,t,r)}},{key:"addEmailSubscriber",value:function(e,t,r){return this._request("POST","/projects/"+e+"/subscribe/email",t,r)}},{key:"deleteEmailSubscriber",value:function(e,t,r){return this._request("DELETE","/projects/"+e+"/subscribe/email",t,r)}},{key:"setScheduleId",value:function(e,t,r){var n={scheduleId:t};return this._request("PUT","/projects/"+e,n,r)}},{key:"updateScheduleWhen",value:function(e,t,r){var n="";t.endsWith("m")?n=t.replace("m","")+" * * * *":t.endsWith("h")&&(n="* "+t.replace("h","")+" * * *");var u={schedule:n};return this._request("PUT","/projects/"+e,u,r)}},{key:"updateScheduleInterval",value:function(e,t,r){var n="";t.endsWith("h")?n="* */"+t.replace("h","")+" * * *":t.endsWith("d")&&(n="* * */"+t.replace("d","")+" * *");var u={schedule:n};return this._request("PUT","/projects/"+e,u,r)}},{key:"updateScheduleCron",value:function(e,t,r){var n={schedule:t};return this._request("PUT","/projects/"+e,n,r)}},{key:"deleteProject",value:function(e,t){return this._request("DELETE","/projects/"+e,null,t)}}]),t}(c.default));t.exports=p},{"./Requestable":4,debug:void 0}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return-1!==j.indexOf(e)}function c(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s*,\s*/).reduce(function(e,t){return-1!==t.search(/rel="next"/)?(t.match(/<(.*)>/)||[])[1]:e},void 0)}function l(e,t){return function(r){var n=void 0;if(r.hasOwnProperty("config")){var u=r.response,o=u.status,a=u.statusText,i=r.config,s=i.method,c=i.url,l=o+" error making request "+s+" "+c+': "'+a+'"';n=new g(l,t,r),v(l+" "+JSON.stringify(r.data))}else n=r;if(!e)throw v("throwing error"),n;v("going to error callback"),e(n)}}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("axios"),d=n(h),y=e("debug"),_=n(y),b=e("js-base64"),v=(0,_.default)("apiway:request"),g=function(e){function t(e,r,n){o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.path=r,u.request=n.config,u.response=(n||{}).response||n,u.status=n.status,u}return i(t,e),t}(Error),w=function(){function e(t,r,n){o(this,e),this.__apiBase=r||"https://api.apiway.io",this.__auth={token:t.token,username:t.username,password:t.password},this.__AcceptHeader=n||"v3",t.token?this.__authorizationHeader="token "+t.token:t.username&&t.password&&(this.__authorizationHeader="Basic "+b.Base64.encode(t.username+":"+t.password))}return p(e,[{key:"__getURL",value:function(e){var t=e;-1===e.indexOf("//")&&(t=this.__apiBase+e);var r="timestamp="+(new Date).getTime();return t.replace(/(timestamp=\d+)/,r)}},{key:"__getRequestHeaders",value:function(e,t){var r={"Content-Type":"application/json;charset=UTF-8",Accept:"application/vnd.apiway."+(t||this.__AcceptHeader)};return e&&(r.Accept+=".raw"),r.Accept+="+json",this.__authorizationHeader&&(r.Authorization=this.__authorizationHeader),r}},{key:"_getOptionsWithDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.visibility||e.affiliation||(e.type=e.type||"all"),e.sort=e.sort||"updated",e.per_page=e.per_page||"100",e}},{key:"_dateToISO",value:function(e){return e&&e instanceof Date&&(e=e.toISOString()),e}},{key:"_request",value:function(e,t,r,n,u){var o=this.__getURL(t),a=(r||{}).AcceptHeader;a&&delete r.AcceptHeader;var i=this.__getRequestHeaders(u,a),c={};r&&"object"===(void 0===r?"undefined":f(r))&&s(e)&&(c=r,r=void 0);var p={url:o,method:e,headers:i,params:c,data:r,responseType:u?"text":"json"};v(p.method+" to "+p.url);var h=(0,d.default)(p).catch(l(n,t));return n&&h.then(function(e){e.data&&Object.keys(e.data).length>0?n(null,e.data,e):"GET"!==p.method&&Object.keys(e.data).length<1?n(null,e.status<300,e):n(null,e.data,e)}),h}},{key:"_request204or404",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return this._request(n,e,t).then(function(e){return r&&r(null,!0,e),!0},function(e){if(404===e.response.status)return r&&r(null,!1,e),!1;throw r&&r(e),e})}},{key:"_requestAllPages",value:function(e,t,r,n){var o=this;return n=n||[],this._request("GET",e,t).then(function(a){var i,s=void 0;if(a.data instanceof Array)s=a.data;else{if(!(a.data.items instanceof Array)){var l="cannot figure out how to append "+a.data+" to the result set";throw new g(l,e,a)}s=a.data.items}(i=n).push.apply(i,u(s));var f=c(a.headers.link);return f&&"number"!=typeof t.page?(v("getting next page: "+f),o._requestAllPages(f,t,r,n)):(r&&r(null,n,a),a.data=n,a)}).catch(l(r,e))}}]),e}();t.exports=w;var j=["GET","HEAD","DELETE"]},{axios:void 0,debug:void 0,"js-base64":void 0}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./Requestable"),c=n(s),l=e("debug"),f=n(l),p=((0,f.default)("apiway:schedule"),function(e){function t(e,r,n){u(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return a.scheduleId=e,a}return a(t,e),i(t,[{key:"getSchedule",value:function(e,t){return this._request("GET","/schedules/"+e,null,t)}},{key:"getSchedules",value:function(e,t){return this._request("GET","/schedules",e,t)}},{key:"getSchedulesByUser",value:function(e,t,r){return this._request("GET","/schedules/users/"+e,t,r)}},{key:"getSchedulesByProject",value:function(e,t,r){return this._request("GET","/schedules/projects/"+e,t,r)}},{key:"addSchedule",value:function(e,t){return this._request("POST","/schedules",e,t)}},{key:"updateSchedule",value:function(e,t,r){return this._request("PUT","/schedules/"+e,t,r)}},{key:"updateScheduleWhen",value:function(e,t,r){var n="";t.endsWith("m")?n=t.replace("m","")+" * * * *":t.endsWith("h")&&(n="* "+t.replace("h","")+" * * *");var u={cron:n};return this._request("PUT","/schedules/"+e,u,r)}},{key:"updateScheduleInterval",value:function(e,t,r){var n="";t.endsWith("h")?n="* */"+t.replace("h","")+" * * *":t.endsWith("d")&&(n="* * */"+t.replace("d","")+" * *");var u={cron:n};return this._request("PUT","/schedules/"+e,u,r)}},{key:"updateCron",value:function(e,t,r){var n={cron:t};return this._request("PUT","/schedules/"+e,n,r)}},{key:"updateState",value:function(e,t,r){var n={state:t};return this._request("PUT","/schedules/"+e,n,r)}},{key:"deleteSchedule",value:function(e,t){return this._request("DELETE","/schedules/"+e,null,t)}},{key:"deleteSchedulesByUser",value:function(e,t){return this._request("DELETE","/schedules/users/"+e,null,t)}},{key:"deleteSchedulesByProject",value:function(e,t){return this._request("DELETE","/schedules/projects/"+e,null,t)}}]),t}(c.default));t.exports=p},{"./Requestable":4,debug:void 0}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./Requestable"),c=n(s),l=e("debug"),f=n(l),p=((0,f.default)("apiway:scheduler"),function(e){function t(e,r,n){u(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return a.schedulerId=e,a}return a(t,e),i(t,[{key:"addScheduler",value:function(e,t){return this._request("POST","/schedulers",e,t)}},{key:"updateScheduler",value:function(e,t,r){return this._request("PUT","/schedulers/"+e,t,r)}},{key:"getScheduler",value:function(e,t){return this._request("GET","/schedulers/"+e,null,t)}},{key:"getSchedulers",value:function(e,t){return this._request("GET","/schedulers",e,t)}},{key:"deleteScheduler",value:function(e,t,r){return this._request("DELETE","/schedulers/"+e,t,r)}},{key:"deleteSchedule",value:function(e,t,r){return this._request("DELETE","/schedulers/"+e,t,r)}}]),t}(c.default));t.exports=p},{"./Requestable":4,debug:void 0}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./Requestable"),c=n(s),l=e("debug"),f=n(l),p=((0,f.default)("apiway:user"),function(e){function t(e,r,n){u(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return a.__user=e,a}return a(t,e),i(t,[{key:"getProfile",value:function(e,t){return this._request("GET","/users/"+e,null,t)}},{key:"updateProfile",value:function(e,t){return this._request("POST","/users",e,t)}}]),t}(c.default));t.exports=p},{"./Requestable":4,debug:void 0}]},{},[1])(1)});
//# sourceMappingURL=ApiWay.min.js.map
